import{J as c,r as d,P as f,j as s}from"./app-8a2a51c8.js";import{P as v}from"./PermohonanSelect-dd72d1d4.js";import{P as w}from"./PilihStatusprosesperm-9f05caa2.js";import{S as N}from"./SelectSearch-c2539244.js";import{l as h}from"./lodash-aaf2e0ec.js";import{u as g}from"./usePrevious-2581348e.js";import{P as b}from"./Pagination-fb68eb83.js";import{h as P}from"./moment-a9aaa855.js";import{A as _}from"./AdminLayout-96d458bc.js";import"./bundle-mjs-11609d99.js";import"./use-flags-4a318b95.js";import"./form-72b18865.js";import"./description-9728843f.js";import"./active-element-history-2e379daf.js";import"./transition-211cf23e.js";import"./react-select.esm-5d079b1e.js";import"./emotion-element-c39617d8.browser.esm-49af1451.js";import"./index-dafd4053.js";import"./NotificationDropdown-3e1ff87d.js";import"./ResponsiveNavLink-42824ad3.js";import"./MenuItem-d7945933.js";const k=({itemprosespermsOpts:n})=>{const{itemprosesperm_id:t,statusprosesperms:e,statusprosesperm_id:l,transpermohonan_id:r,permohonan:o}=c().props,[i,p]=d.useState({itemprosesperm_id:t,statusprosesperm_id:l,transpermohonan_id:r,permohonan:o}),x=g(i),u=n.find(a=>a.value==t),j=e.find(a=>a.id==l);return d.useEffect(()=>{if(x){const a=Object.keys(h.pickBy(i)).length?h.pickBy(i):{};f.get(route(route().current()?route().current()+"":""),a,{replace:!0,preserveState:!0})}},[i]),s.jsxs("div",{className:"p-4 bg-blueGray-100 shadow-md rounded-md flex flex-col",children:[s.jsx("h1",{className:"font-bold text-lightBlue-700 mb-2",children:"Permohonan"}),s.jsx(v,{value:o,className:"mb-1",onValueChange:a=>{p(m=>({...m,permohonan:a.id,transpermohonan_id:a.transpermohonan.id}))}}),s.jsx("h1",{className:"font-bold text-lightBlue-700 mb-2",children:"Nama Proses"}),s.jsx(N,{options:n,value:u,onChange:a=>{p(m=>({...m,itemprosesperm_id:a.value}))}}),s.jsx("h1",{className:"font-bold text-lightBlue-700 mb-2",children:"Status Proses"}),s.jsx(w,{statusprosesperms:e,statusprosesperm:j,setStatusprosesperm:a=>{p(m=>({...m,statusprosesperm_id:a.id}))}})]})},y=({prosespermohonans:{data:n,links:t}})=>s.jsxs("div",{className:"p-4 flex flex-col text-xs bg-blueGray-100 rounded-md shadow-lg",children:[s.jsx("h1",{className:"font-bold text-lg text-lightBlue-700",children:"Proses Permohonan"}),s.jsx("ul",{className:"list-none",children:n&&n.map((e,l)=>s.jsxs("li",{children:[s.jsxs("div",{className:"relative w-full flex flex-row justify-between rounded-t-md mt-2 px-2 pt-2 bg-white text-lightBlue-700 font-bold text-xs",children:[s.jsx("span",{children:e.itemprosesperm.nama_itemprosesperm}),s.jsx("span",{children:e.transpermohonan.jenispermohonan.nama_jenispermohonan})]}),s.jsxs("div",{className:"w-full grid grid-cols-1 md:grid-cols-2 mt-0 bg-white px-2 shadow",children:[s.jsxs("div",{className:"w-full flex items-start flex-wrap",children:[s.jsx("div",{className:"w-1/4",children:"Pelepas"}),s.jsx("div",{className:"w-3/4",children:e.transpermohonan.permohonan.nama_pelepas}),s.jsx("div",{className:"w-1/4",children:"Penerima"}),s.jsx("div",{className:"w-3/4",children:e.transpermohonan.permohonan.nama_penerima}),s.jsx("div",{className:"w-1/4",children:"Alas Hak"}),s.jsxs("div",{className:"w-3/4",children:[e.transpermohonan.permohonan.jenishak.singkatan,".",e.transpermohonan.permohonan.nomor_hak,","," ",e.transpermohonan.permohonan.jenishak.singkatan=="C"?"Ps "+e.transpermohonan.permohonan.persil+", "+e.transpermohonan.permohonan.klas:null," ","L.",e.transpermohonan.permohonan.luas_tanah,"M2"]})]}),s.jsxs("div",{className:"w-full flex items-start flex-wrap",children:[s.jsx("div",{className:"w-1/4",children:"Atas Nama"}),s.jsx("div",{className:"w-3/4",children:e.transpermohonan.permohonan.atas_nama}),s.jsx("div",{className:"w-1/4",children:"Lokasi"}),s.jsxs("div",{className:"w-3/4",children:["Desa"," ",e.transpermohonan.permohonan.desa.nama_desa,","," ",e.transpermohonan.permohonan.desa.kecamatan.nama_kecamatan]}),s.jsx("div",{className:"w-1/4",children:"User"}),s.jsx("div",{className:"w-3/4",children:e.transpermohonan.permohonan.users&&e.transpermohonan.permohonan.users.length>0&&e.transpermohonan.permohonan.users.map((r,o)=>s.jsxs("span",{children:[o>0?", ":"",r.name]},o))})]})]}),s.jsx("div",{className:"relative w-full rounded-b-md px-2 py-2 pb-2 bg-white text-red-700 text-xs shadow",children:e.statusprosesperms&&e.statusprosesperms.map((r,o)=>s.jsxs("ol",{className:"flex flex-wrap w-full list-disc ml-3 gap-1",children:[s.jsx("li",{children:P(r.pivot.created_at).format("DD MMM YYYY HH:mm")}),s.jsx("li",{className:"ml-4",children:r.nama_statusprosesperm}),r.pivot.catatan_statusprosesperm?s.jsx("li",{className:"ml-4",children:r.pivot.catatan_statusprosesperm}):null]},o))})]},l))}),s.jsx(b,{links:t})]}),Q=()=>{const{itemprosespermsOpts:n,prosespermohonans:t}=c().props;return s.jsx(_,{children:s.jsxs("div",{className:"flex flex-col md:flex-row items-start gap-2",children:[s.jsx("div",{className:"w-full md:w-1/3",children:s.jsx(k,{itemprosespermsOpts:n})}),s.jsx("div",{className:"w-full md:w-2/3",children:s.jsx(y,{prosespermohonans:t})})]})})};export{Q as default};
