import{r as l,R as E}from"./app-8a2a51c8.js";import{u as R,a as Y,f as te,p as ne,s as y,l as K,O as he,U as _,y as le,v as L,b as ie,c as ge,o as x,d as ee,C as ae}from"./use-flags-4a318b95.js";let J=l.createContext(null);J.displayName="OpenClosedContext";var T=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(T||{});function se(){return l.useContext(J)}function be({value:e,children:r}){return E.createElement(J.Provider,{value:e},r)}function Ee(e){let r={called:!1};return(...t)=>{if(!r.called)return r.called=!0,e(...t)}}function z(e,...r){e&&r.length>0&&e.classList.add(...r)}function G(e,...r){e&&r.length>0&&e.classList.remove(...r)}function Te(e,r){let t=Y();if(!e)return t.dispose;let{transitionDuration:a,transitionDelay:v}=getComputedStyle(e),[h,m]=[a,v].map(o=>{let[i=0]=o.split(",").filter(Boolean).map(u=>u.includes("ms")?parseFloat(u):parseFloat(u)*1e3).sort((u,g)=>g-u);return i}),d=h+m;if(d!==0){t.group(i=>{i.setTimeout(()=>{r(),i.dispose()},d),i.addEventListener(e,"transitionrun",u=>{u.target===u.currentTarget&&i.dispose()})});let o=t.addEventListener(e,"transitionend",i=>{i.target===i.currentTarget&&(r(),o())})}else r();return t.add(()=>r()),t.dispose}function Ce(e,r,t,a){let v=t?"enter":"leave",h=Y(),m=a!==void 0?Ee(a):()=>{};v==="enter"&&(e.removeAttribute("hidden"),e.style.display="");let d=R(v,{enter:()=>r.enter,leave:()=>r.leave}),o=R(v,{enter:()=>r.enterTo,leave:()=>r.leaveTo}),i=R(v,{enter:()=>r.enterFrom,leave:()=>r.leaveFrom});return G(e,...r.base,...r.enter,...r.enterTo,...r.enterFrom,...r.leave,...r.leaveFrom,...r.leaveTo,...r.entered),z(e,...r.base,...d,...i),h.nextFrame(()=>{G(e,...r.base,...d,...i),z(e,...r.base,...d,...o),Te(e,()=>(G(e,...r.base,...d),z(e,...r.base,...r.entered),m()))}),h.dispose}function Fe({immediate:e,container:r,direction:t,classes:a,onStart:v,onStop:h}){let m=te(),d=ne(),o=y(t);K(()=>{e&&(o.current="enter")},[e]),K(()=>{let i=Y();d.add(i.dispose);let u=r.current;if(u&&o.current!=="idle"&&m.current)return i.dispose(),v.current(o.current),i.add(Ce(u,a.current,o.current==="enter",()=>{i.dispose(),h.current(o.current)})),i.dispose},[t])}function F(e=""){return e.split(/\s+/).filter(r=>r.length>1)}let A=l.createContext(null);A.displayName="TransitionContext";var Re=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Re||{});function xe(){let e=l.useContext(A);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function we(){let e=l.useContext(q);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let q=l.createContext(null);q.displayName="NestingContext";function B(e){return"children"in e?B(e.children):e.current.filter(({el:r})=>r.current!==null).filter(({state:r})=>r==="visible").length>0}function ue(e,r){let t=y(e),a=l.useRef([]),v=te(),h=ne(),m=x((f,s=L.Hidden)=>{let c=a.current.findIndex(({el:n})=>n===f);c!==-1&&(R(s,{[L.Unmount](){a.current.splice(c,1)},[L.Hidden](){a.current[c].state="hidden"}}),h.microTask(()=>{var n;!B(a)&&v.current&&((n=t.current)==null||n.call(t))}))}),d=x(f=>{let s=a.current.find(({el:c})=>c===f);return s?s.state!=="visible"&&(s.state="visible"):a.current.push({el:f,state:"visible"}),()=>m(f,L.Unmount)}),o=l.useRef([]),i=l.useRef(Promise.resolve()),u=l.useRef({enter:[],leave:[],idle:[]}),g=x((f,s,c)=>{o.current.splice(0),r&&(r.chains.current[s]=r.chains.current[s].filter(([n])=>n!==f)),r==null||r.chains.current[s].push([f,new Promise(n=>{o.current.push(n)})]),r==null||r.chains.current[s].push([f,new Promise(n=>{Promise.all(u.current[s].map(([N,P])=>P)).then(()=>n())})]),s==="enter"?i.current=i.current.then(()=>r==null?void 0:r.wait.current).then(()=>c(s)):c(s)}),b=x((f,s,c)=>{Promise.all(u.current[s].splice(0).map(([n,N])=>N)).then(()=>{var n;(n=o.current.shift())==null||n()}).then(()=>c(s))});return l.useMemo(()=>({children:a,register:d,unregister:m,onStart:g,onStop:b,wait:i,chains:u}),[d,m,a,g,b,u,i])}function $e(){}let Le=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function re(e){var r;let t={};for(let a of Le)t[a]=(r=e[a])!=null?r:$e;return t}function Ne(e){let r=l.useRef(re(e));return l.useEffect(()=>{r.current=re(e)},[e]),r}let Pe="div",oe=he.RenderStrategy;function Se(e,r){var t,a;let{beforeEnter:v,afterEnter:h,beforeLeave:m,afterLeave:d,enter:o,enterFrom:i,enterTo:u,entered:g,leave:b,leaveFrom:f,leaveTo:s,...c}=e,n=l.useRef(null),N=le(n,r),P=(t=c.unmount)==null||t?L.Unmount:L.Hidden,{show:p,appear:w,initial:W}=xe(),[$,j]=l.useState(p?"visible":"hidden"),X=we(),{register:D,unregister:H}=X;l.useEffect(()=>D(n),[D,n]),l.useEffect(()=>{if(P===L.Hidden&&n.current){if(p&&$!=="visible"){j("visible");return}return R($,{hidden:()=>H(n),visible:()=>D(n)})}},[$,n,D,H,p,P]);let k=y({base:F(c.className),enter:F(o),enterFrom:F(i),enterTo:F(u),entered:F(g),leave:F(b),leaveFrom:F(f),leaveTo:F(s)}),U=Ne({beforeEnter:v,afterEnter:h,beforeLeave:m,afterLeave:d}),I=ie();l.useEffect(()=>{if(I&&$==="visible"&&n.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[n,$,I]);let de=W&&!w,Z=w&&p&&W,fe=(()=>!I||de?"idle":p?"enter":"leave")(),O=ge(0),ve=x(C=>R(C,{enter:()=>{O.addFlag(T.Opening),U.current.beforeEnter()},leave:()=>{O.addFlag(T.Closing),U.current.beforeLeave()},idle:()=>{}})),me=x(C=>R(C,{enter:()=>{O.removeFlag(T.Opening),U.current.afterEnter()},leave:()=>{O.removeFlag(T.Closing),U.current.afterLeave()},idle:()=>{}})),M=ue(()=>{j("hidden"),H(n)},X),V=l.useRef(!1);Fe({immediate:Z,container:n,classes:k,direction:fe,onStart:y(C=>{V.current=!0,M.onStart(n,C,ve)}),onStop:y(C=>{V.current=!1,M.onStop(n,C,me),C==="leave"&&!B(M)&&(j("hidden"),H(n))})});let S=c,pe={ref:N};return Z?S={...S,className:ee(c.className,...k.current.enter,...k.current.enterFrom)}:V.current&&(S.className=ee(c.className,(a=n.current)==null?void 0:a.className),S.className===""&&delete S.className),E.createElement(q.Provider,{value:M},E.createElement(be,{value:R($,{visible:T.Open,hidden:T.Closed})|O.flags},ae({ourProps:pe,theirProps:S,defaultTag:Pe,features:oe,visible:$==="visible",name:"Transition.Child"})))}function Oe(e,r){let{show:t,appear:a=!1,unmount:v=!0,...h}=e,m=l.useRef(null),d=le(m,r);ie();let o=se();if(t===void 0&&o!==null&&(t=(o&T.Open)===T.Open),![!0,!1].includes(t))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[i,u]=l.useState(t?"visible":"hidden"),g=ue(()=>{u("hidden")}),[b,f]=l.useState(!0),s=l.useRef([t]);K(()=>{b!==!1&&s.current[s.current.length-1]!==t&&(s.current.push(t),f(!1))},[s,t]);let c=l.useMemo(()=>({show:t,appear:a,initial:b}),[t,a,b]);l.useEffect(()=>{if(t)u("visible");else if(!B(g))u("hidden");else{let p=m.current;if(!p)return;let w=p.getBoundingClientRect();w.x===0&&w.y===0&&w.width===0&&w.height===0&&u("hidden")}},[t,g]);let n={unmount:v},N=x(()=>{var p;b&&f(!1),(p=e.beforeEnter)==null||p.call(e)}),P=x(()=>{var p;b&&f(!1),(p=e.beforeLeave)==null||p.call(e)});return E.createElement(q.Provider,{value:g},E.createElement(A.Provider,{value:c},ae({ourProps:{...n,as:l.Fragment,children:E.createElement(ce,{ref:d,...n,...h,beforeEnter:N,beforeLeave:P})},theirProps:{},defaultTag:l.Fragment,features:oe,visible:i==="visible",name:"Transition"})))}function ye(e,r){let t=l.useContext(A)!==null,a=se()!==null;return E.createElement(E.Fragment,null,!t&&a?E.createElement(Q,{ref:r,...e}):E.createElement(ce,{ref:r,...e}))}let Q=_(Oe),ce=_(Se),De=_(ye),Me=Object.assign(Q,{Child:De,Root:Q});export{T as d,Me as q,be as s,se as u};
